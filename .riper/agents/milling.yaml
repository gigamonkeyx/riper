# RIPER-Ω Milling Day Agent Configuration
# Specialized agent for milling day coordination and grain processing
# Uses llama3.2:1b for lightweight task delegation and group coordination

agent_type: "milling-day-coordinator"
model: "llama3.2:1b"
specialization: "grain_milling_coordination"
priority: 2

# Milling Day Configuration
milling_config:
  event_capacity: 25  # Scaled capacity for larger events
  session_duration: 4  # 4 hours per milling session
  signup_fee: 5.0  # $5 per participant
  group_size_optimal: 8  # Optimal group size for milling instruction
  equipment_capacity: 3  # Number of grain mills available

# Grain Processing Tasks
grain_processing:
  - grain_type: "wheat"
    processing_time: 15  # minutes per batch
    yield_ratio: 0.85  # 85% flour yield from grain
    storage_requirements: "airtight_containers"
    
  - grain_type: "barley"
    processing_time: 12  # minutes per batch
    yield_ratio: 0.80  # 80% flour yield
    storage_requirements: "moisture_controlled"
    
  - grain_type: "oats"
    processing_time: 10  # minutes per batch
    yield_ratio: 0.75  # 75% flour yield
    storage_requirements: "standard_containers"

# Equipment Management
equipment:
  - name: "grain_mill_1"
    type: "stone_mill"
    capacity: "5_lbs_per_hour"
    maintenance_schedule: "monthly"
    
  - name: "grain_mill_2"
    type: "steel_burr_mill"
    capacity: "8_lbs_per_hour"
    maintenance_schedule: "quarterly"
    
  - name: "grain_mill_3"
    type: "hand_crank_mill"
    capacity: "3_lbs_per_hour"
    maintenance_schedule: "as_needed"

# Group Buy Coordination
group_buys:
  - item: "grain_storage_containers"
    bulk_discount: 0.20  # 20% savings for bulk orders
    minimum_order: 10
    supplier: "local_farm_supply"
    
  - item: "grain_samples"
    bulk_discount: 0.15  # 15% savings
    minimum_order: 25
    supplier: "okanogan_valley_grains"
    
  - item: "milling_accessories"
    bulk_discount: 0.12  # 12% savings
    minimum_order: 15
    supplier: "regional_equipment"

# Tasks
tasks:
  - task_id: "session_coordination"
    description: "Coordinate milling day sessions and participant groups"
    model_delegation: "llama3.2:1b"
    priority: 1
    estimated_time: 10  # minutes
    
  - task_id: "equipment_management"
    description: "Manage grain mill allocation and maintenance"
    model_delegation: "llama3.2:1b"
    priority: 1
    estimated_time: 8
    
  - task_id: "grain_processing_guidance"
    description: "Provide grain processing instruction and quality control"
    model_delegation: "llama3.2:1b"
    priority: 2
    estimated_time: 15
    
  - task_id: "group_buy_coordination"
    description: "Coordinate bulk purchases for participants"
    model_delegation: "llama3.2:1b"
    priority: 2
    estimated_time: 12
    
  - task_id: "safety_monitoring"
    description: "Monitor safety protocols during milling operations"
    model_delegation: "llama3.2:1b"
    priority: 1
    estimated_time: 5

  # NEW: B2B Take-Back Integration Tasks
  - task_id: "b2b_coordination"
    description: "Coordinate milling events with B2B buyer participation"
    model_delegation: "llama3.2:1b"
    priority: 2
    estimated_time: 10
    takeback_integration: true

  - task_id: "return_processing"
    description: "Process flour returns and quality rejects for B2B system"
    model_delegation: "llama3.2:1b"
    priority: 2
    estimated_time: 8
    takeback_integration: true

  - task_id: "spoilage_tracking"
    description: "Track milling spoilage for B2B donation calculations"
    model_delegation: "llama3.2:1b"
    priority: 3
    estimated_time: 5
    takeback_integration: true

# Participant Management
participants:
  capacity: 25  # Maximum participants per session
  skill_levels:
    - beginner: 60%  # 60% beginners
    - intermediate: 30%  # 30% intermediate
    - advanced: 10%  # 10% advanced
  
  group_formation:
    mixed_skill: true  # Mix skill levels for peer learning
    optimal_size: 8  # 8 participants per group
    instructor_ratio: 0.125  # 1 instructor per 8 participants

# Learning Outcomes
learning_objectives:
  - objective: "grain_identification"
    description: "Identify different grain types and their properties"
    assessment: "visual_identification_test"
    
  - objective: "milling_techniques"
    description: "Learn proper milling techniques for different grains"
    assessment: "practical_demonstration"
    
  - objective: "quality_assessment"
    description: "Assess flour quality and storage requirements"
    assessment: "quality_checklist"
    
  - objective: "equipment_operation"
    description: "Safely operate grain milling equipment"
    assessment: "safety_protocol_quiz"

# Performance Metrics
metrics:
  - name: "session_efficiency"
    description: "Percentage of planned milling completed"
    target: 0.9  # 90% completion rate
    
  - name: "participant_satisfaction"
    description: "Average participant satisfaction score"
    target: 4.5  # 4.5/5.0 satisfaction
    
  - name: "equipment_utilization"
    description: "Percentage of equipment capacity used"
    target: 0.85  # 85% utilization
    
  - name: "group_buy_participation"
    description: "Percentage of participants joining group buys"
    target: 0.7  # 70% participation

# Safety Protocols
safety:
  - protocol: "equipment_inspection"
    frequency: "before_each_session"
    responsible: "coordinator"
    
  - protocol: "participant_briefing"
    frequency: "session_start"
    responsible: "instructor"
    
  - protocol: "dust_control"
    frequency: "continuous"
    responsible: "all_participants"
    
  - protocol: "emergency_procedures"
    frequency: "as_needed"
    responsible: "coordinator"

# Integration Settings
integration:
  simpy_des_coordination: true    # Coordinate with SimPy signup queues
  mesa_abm_coordination: true     # Coordinate with Mesa participant agents
  outreach_yaml_coordination: true  # Coordinate with outreach.yaml
  takeback_system_integration: true  # NEW: B2B take-back integration

# B2B Take-Back Integration (NEW)
b2b_takeback_integration:
  enabled: true
  buyer_participation:
    c_corp_milling_rate: 0.60     # 60% C corp participation in milling events
    llc_milling_rate: 0.70        # 70% LLC participation in milling events
    gov_milling_rate: 0.80        # 80% government entity participation

  milling_returns:
    flour_returns: 0.05           # 5% flour returns from milling to B2B system
    processing_waste: 0.02        # 2% processing waste (contributes to spoilage)
    quality_rejects: 0.01         # 1% quality rejects returned to B2B system

  donation_coordination:
    milling_to_donation_flow: true  # Connect milling outputs to donation system
    spoilage_tracking: true         # Track milling spoilage for B2B calculations
    cost_basis_integration: true    # Integrate with $3/$4/$5 cost basis system
  
# Seasonal Scheduling
seasonal_schedule:
  peak_months: ["September", "October", "November"]  # Post-harvest focus
  frequency: "bi_weekly"  # Every two weeks during peak
  off_season_frequency: "monthly"  # Monthly during off-season
  
# Revenue Model
revenue:
  signup_fees: 5.0  # $5 per participant
  capacity: 25  # participants per session
  sessions_per_month: 2  # bi-weekly sessions
  monthly_revenue: 250  # $5 × 25 × 2 = $250/month
  annual_revenue: 3000  # $250 × 12 = $3,000/year

# Logging Configuration
logging:
  level: "INFO"
  factual_reporting: true
  session_tracking: true
  equipment_monitoring: true
  participant_progress: true
  takeback_integration_logging: true  # Log B2B take-back integration status

# Verification Status (Observer confirmation)
verification:
  takeback_tasks_tied: true  # 3 B2B tasks: b2b_coordination, return_processing, spoilage_tracking
  integration_enabled: true  # B2B take-back integration active
  config_count: 1           # 1 milling config added
  parsing_status: "Success" # YAML parsing successful
